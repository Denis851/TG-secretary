[build]
builder = "nixpacks"
buildCommand = "pip install -r requirements.txt"

[deploy]
startCommand = "python main.py"
healthcheckPath = "/health"
healthcheckTimeout = 300
healthcheckInterval = 30
healthcheckStartPeriod = 120
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 5
port = 8080

[deploy.env]
PYTHONUNBUFFERED = "1"
PYTHONPATH = "."
PORT = "8080"
RAILWAY_ENVIRONMENT = "production"
STARTUP_DELAY = "30"

[[services]]
name = "worker"
serviceType = "web"

[[services.dependencies]]
name = "redis"
serviceType = "redis" 